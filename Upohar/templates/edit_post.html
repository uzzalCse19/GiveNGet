{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-2xl font-semibold mb-4">Edit Post</h2>

    <form method="POST" enctype="multipart/form-data" class="space-y-4">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div>
            <label class="block font-semibold">Title</label>
            {{ form.title }}
        </div>

        <div>
            <label class="block font-semibold">Description</label>
            {{ form.description }}
        </div>

        <div>
            <label class="block font-semibold">Category</label>
            {{ form.category }}
        </div>

        <div>
            <label class="block font-semibold">City</label>
            {{ form.city }}
        </div>

        <div>
            <label class="block font-semibold">Type</label>
            {{ form.type }}
        </div>

        <!-- Exchange Fields -->
        <div id="exchangeFields">
            <div>
                <label class="block font-semibold">Exchange Item Name</label>
                {{ form.exchange_item_name }}
            </div>
            <div>
                <label class="block font-semibold">Exchange Item Description</label>
                {{ form.exchange_item_description }}
            </div>
        </div>

        <div>
            <label class="block font-semibold">Image</label>
            {{ form.image }}
        </div>

        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            Save Changes
        </button>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const typeField = document.getElementById('id_type');
    const exchangeFields = document.getElementById('exchangeFields');

    function toggleExchangeFields() {
        if (typeField.value === 'exchange') {
            exchangeFields.style.display = 'block';
        } else {
            exchangeFields.style.display = 'none';
            // Clear values if switched back to donation
            document.getElementById('id_exchange_item_name').value = '';
            document.getElementById('id_exchange_item_description').value = '';
        }
    }

    // Initial check
    toggleExchangeFields();

    // Listen for changes
    typeField.addEventListener('change', toggleExchangeFields);
});
</script>
{% endblock %}
